<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M&D Digital — Home</title>
  <meta name="description" content="M&D Digital — web dizajn, video reklame, digitalni marketing (SR/DE/EN)." />
  <meta property="og:title" content="M&D Digital — Web • Video • Marketing" />
  <meta property="og:description" content="Web stranice, kratke video reklame i pametan marketing — DE/SR/EN." />
  <meta property="og:image" content="og-image.png" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="M&D Digital — Web • Video • Marketing" />
  <meta name="twitter:description" content="Web stranice, kratke video reklame i pametan marketing — DE/SR/EN." />
  <meta name="twitter:image" content="og-image.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
  <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon-180.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#0b0e14">
  <style>
    :root{--bg:#0b0e14;--muted:#111522;--text:#e8ecf1;--sub:#b0b7c3;--brand:#4fd1c5;--brand-2:#a78bfa;--card:#121826}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Noto Sans",Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    img,video{max-width:100%;height:auto}
    header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(10px);-webkit-backdrop-filter:saturate(140%) blur(10px);background:rgba(9,12,20,.15);border-bottom:1px solid rgba(255,255,255,.06)}
    .container{max-width:1160px;margin:0 auto;padding:0 20px}
    .nav{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;align-items:center;gap:12px;font-weight:700;letter-spacing:.4px}
    .brand .logo{width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-2));display:inline-block}
    .brand img#brandLogo{vertical-align:middle}
    .brand:hover #brandLogo{filter:drop-shadow(0 0 6px rgba(79,209,197,.6))}
    nav ul{list-style:none;display:flex;gap:18px;margin:0;padding:0;align-items:center}
    nav a{opacity:.9} nav a:hover{opacity:1}
    .lang-switch{display:flex;gap:8px}
    .lang-switch button{background:transparent;border:1px solid rgba(255,255,255,.15);color:var(--text);padding:6px 10px;border-radius:10px;cursor:pointer;font-size:.85rem}
    .lang-switch button.active{border-color:var(--brand);box-shadow:0 0 0 2px rgba(79,209,197,.25) inset}
    .cta{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0a0f18;border:none;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
    .hero{position:relative;min-height:68vh;display:grid;place-items:center;padding:72px 0}
    .hero-wrap{display:grid;grid-template-columns:1.2fr .8fr;gap:36px;align-items:center;position:relative}
    .hero h1{font-size:clamp(28px,4vw,48px);line-height:1.1;margin:0}
    .hero p{color:var(--sub);font-size:clamp(15px,1.4vw,18px)}
    .hero .pill{display:inline-flex;gap:8px;align-items:center;background:rgba(255,255,255,.06);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.08);font-size:.85rem;margin-bottom:14px}
    .glass{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:18px}
    section{padding:72px 0} h2{font-size:clamp(22px,3.2vw,34px);margin:0 0 8px} .sub{color:var(--sub);margin:0 0 24px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:18px} .card h3{margin:0 0 8px;font-size:1.05rem}
    .chip{display:inline-block;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);padding:4px 8px;border-radius:999px;font-size:.8rem;color:var(--sub)}
    .contact{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    .contact form{display:grid;gap:10px}
    .input{background:#0c121d;border:1px solid rgba(255,255,255,.1);color:var(--text);padding:10px 12px;border-radius:12px}
    .input:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 3px rgba(79,209,197,.15)}
    footer{padding:36px 0;color:var(--sub);border-top:1px dashed rgba(255,255,255,.08)}
    @media (max-width:980px){.hero-wrap{grid-template-columns:1fr}.grid{grid-template-columns:1fr}.contact{grid-template-columns:1fr}nav ul{display:none}.menu-btn{display:inline-flex}}
    @media (min-width:981px){.menu-btn{display:none}}
    .drawer{position:fixed;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(4px);display:none}
    .drawer.open{display:block}
    .drawer .panel{position:absolute;right:0;top:0;height:100%;width:min(78vw,360px);background:#0e1422;border-left:1px solid rgba(255,255,255,.08);padding:18px;display:flex;flex-direction:column;gap:16px}
    .drawer a{padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.06)}
    .hero video{display:block;width:100%;height:auto;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);object-fit:cover;object-position:60% center}
    .hero .hero-wrap>div:first-child::before{content:"";position:absolute;left:0;bottom:0;width:68%;height:55%;background:linear-gradient(90deg, rgba(11,14,20,.65), transparent);filter:blur(8px);z-index:-1;border-radius:20px}
    .hero-media{position:relative}
    .play-btn{position:absolute;inset:auto 16px 16px auto;padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.45);color:#fff;font-weight:700;cursor:pointer}
    .play-btn:hover{background:rgba(0,0,0,.6)}
    /* Lightbox */
    .lb{position:fixed;inset:0;z-index:60;display:block}
    .lb[hidden]{display:none}
    .lb__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px)}
    .lb__panel{position:relative;z-index:1;margin:6vh auto 0;max-width:min(92vw,980px);background:#0e1422;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px}
    .lb__close{position:absolute;right:10px;top:10px;border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.35);color:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="#top" aria-label="M&D Digital">
        <span class="logo" aria-hidden="true"></span>
        <img id="brandLogo" src="logo-md.png" srcset="logo-md.png 1x, logo-md@2x.png 2x" alt="M&D logo" width="28" height="28" style="border-radius:6px;display:none" onerror="this.style.display='none'" onload="this.previousElementSibling.style.display='none'; this.style.display='inline-block';" />
        <span id="brandName">M&D Digital</span>
      </a>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#services" data-i18n="nav_services"></a></li>
          <li><a href="#products" data-i18n="nav_products"></a></li>
          <li><a href="#portfolio" data-i18n="nav_portfolio"></a></li>
          <li><a href="#contact" data-i18n="nav_contact"></a></li>
        </ul>
      </nav>
      <div style="display:flex;align-items:center;gap:10px">
        <div class="lang-switch" role="group" aria-label="Language switcher">
          <button class="active" data-lang="en">EN</button>
          <button data-lang="de">DE</button>
          <button data-lang="sr">SRB</button>
        </div>
        <button class="cta" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})" data-i18n="cta_quote"></button>
        <button class="menu-btn input" aria-label="Open menu" onclick="toggleDrawer()">☰</button>
      </div>
    </div>
  </header>

  <div class="drawer" id="drawer" onclick="toggleDrawer(event)">
    <div class="panel" onclick="event.stopPropagation()">
      <a href="#services" onclick="toggleDrawer()" data-i18n="nav_services"></a>
      <a href="#products" onclick="toggleDrawer()" data-i18n="nav_products"></a>
      <a href="#portfolio" onclick="toggleDrawer()" data-i18n="nav_portfolio"></a>
      <a href="#contact" onclick="toggleDrawer()" data-i18n="nav_contact"></a>
      <div class="lang-switch">
        <button class="active" data-lang="en">EN</button>
        <button data-lang="de">DE</button>
        <button data-lang="sr">SRB</button>
      </div>
    </div>
  </div>

  <main id="top" class="hero container">
    <div class="hero-wrap">
      <div>
        <div class="pill" data-i18n="hero_pill"></div>
        <h1 data-i18n="hero_title"></h1>
        <p data-i18n="hero_sub"></p>
        <div style="display:flex;gap:10px;margin-top:12px">
          <a class="cta" href="#portfolio" data-i18n="cta_portfolio"></a>
          <a class="input" href="#services" data-i18n="cta_services"></a>
        </div>
        <div class="glass" style="margin-top:16px">
          <small class="note" data-i18n="hero_note"></small>
        </div>
      </div>
      <div>
        <div class="hero-media">
          <video id="heroVideo" poster="hero-robot.png" preload="metadata" playsinline controls>
            <track id="track-en" kind="subtitles" src="avatar-en.vtt" srclang="en" label="English" default>
            <track id="track-de" kind="subtitles" src="avatar-de.vtt" srclang="de" label="Deutsch">
            <track id="track-sr" kind="subtitles" src="avatar-sr.vtt" srclang="sr" label="Srpski">
          </video>
          <button id="playBtn" class="play-btn" aria-label="Play/Pause">▶</button>
        </div>
        <div class="glass" style="margin-top:10px">
          <small class="note" data-i18n="hero_video_note"></small>
        </div>
      </div>
    </div>
  </main>

  <section id="services">
    <div class="container">
      <h2 data-i18n="sec_services_title"></h2>
      <p class="sub" data-i18n="sec_services_sub"></p>
      <div class="grid">
        <article class="card">
          <span class="chip" data-i18n="s1_chip"></span>
          <h3 data-i18n="s1_title"></h3>
          <p class="sub" data-i18n="s1_text"></p>
        </article>
        <article class="card">
          <span class="chip" data-i18n="s2_chip"></span>
          <h3 data-i18n="s2_title"></h3>
          <p class="sub" data-i18n="s2_text"></p>
        </article>
        <article class="card">
          <span class="chip" data-i18n="s3_chip"></span>
          <h3 data-i18n="s3_title"></h3>
          <p class="sub" data-i18n="s3_text"></p>
        </article>
      </div>
    </div>
  </section>

  <section id="products">
    <div class="container">
      <h2 data-i18n="sec_products_title"></h2>
      <p class="sub" data-i18n="sec_products_sub"></p>
      <div class="grid">
        <article class="card"><h3 data-i18n="p1_title"></h3><ul class="sub" id="p1_list"></ul></article>
        <article class="card"><h3 data-i18n="p2_title"></h3><ul class="sub" id="p2_list"></ul></article>
        <article class="card"><h3 data-i18n="p3_title"></h3><ul class="sub" id="p3_list"></ul></article>
      </div>
    </div>
  </section>

  <section id="portfolio">
    <div class="container">
      <h2 data-i18n="sec_portfolio_title"></h2>
      <p class="sub" data-i18n="sec_portfolio_sub"></p>

      <div id="lightbox" class="lb" hidden>
        <div class="lb__backdrop" onclick="closeLB()"></div>
        <div class="lb__panel" role="dialog" aria-modal="true">
          <button class="lb__close" aria-label="Close" onclick="closeLB()">✕</button>
          <figure style="margin:0">
            <img id="lbImg" alt="Preview" loading="lazy" style="max-width:100%;height:auto;border-radius:12px" />
            <figcaption id="lbCap" class="sub" style="margin-top:8px"></figcaption>
          </figure>
          <div style="display:flex;gap:10px;margin-top:12px">
            <a id="lbPdf" class="cta" href="#" target="_blank" rel="noopener" data-i18n="btn_open_pdf" style="display:none"></a>
          </div>
        </div>
      </div>

      <div class="grid">
        <article class="card">
          <h3>Peterova pekara</h3>
          <p class="sub" data-i18n="port1"></p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <button class="cta" onclick="openLB({img:'assets/portfolio/peterova-pekara.jpg', cap:i18n('cap_peter'), pdf:'assets/portfolio/peterova-pekara.pdf'})" data-i18n="btn_preview"></button>
          </div>
        </article>
        <article class="card">
          <h3>D&M Enterprise video</h3>
          <p class="sub" data-i18n="port2"></p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <a class="cta" href="https://example.com/dm-enterprise-video" target="_blank" rel="noopener" data-i18n="btn_open_video"></a>
          </div>
        </article>
        <article class="card">
          <h3>CoreAlliance logo</h3>
          <p class="sub" data-i18n="port3"></p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <button class="cta" onclick="openLB({img:'assets/portfolio/corealliance-logo.jpg', cap:i18n('cap_core'), pdf:'assets/portfolio/corealliance-logo.pdf'})" data-i18n="btn_preview"></button>
          </div>
        </article>
      </div>
    </div>
  </section>

  <section id="contact">
    <div class="container">
      <h2 data-i18n="sec_contact_title"></h2>
      <p class="sub" data-i18n="sec_contact_sub"></p>
      <div class="contact">
        <form action="mailto:dmdigitalenterprise.team@gmail.com" method="post" enctype="text/plain">
          <input class="input" name="name" placeholder="Ime i prezime" required />
          <input class="input" type="email" name="email" placeholder="Email" required />
          <textarea class="input" name="message" rows="6" placeholder="Poruka…" required></textarea>
          <button class="cta" type="submit" data-i18n="cta_send"></button>
          <small class="note" data-i18n="contact_note"></small>
        </form>
        <div class="card">
          <h3 data-i18n="contact_alt_title"></h3>
          <p class="sub">Email: <a href="mailto:dmdigitalenterprise.team@gmail.com">dmdigitalenterprise.team@gmail.com</a></p>
          <p class="sub">LinkedIn / WhatsApp / Viber — po zahtevu</p>
          <p class="sub" data-i18n="contact_alt_note"></p>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <small>© <span id="y"></span> M&D Digital — <span data-i18n="foot_rights"></span></small>
      <small class="sub">Design & code: M&D</small>
    </div>
  </footer>

  <script>
    const dict={
      sr:{nav_services:"Usluge",nav_products:"Paketi",nav_portfolio:"Portfolio",nav_contact:"Kontakt",cta_quote:"Zatraži ponudu",cta_portfolio:"Pogledaj portfolio",cta_services:"Usluge",hero_pill:"Digitalni dizajn • Video • Web",hero_title:"Jednostavno — pravimo da vas pamte.",hero_sub:"Web stranice, kratke video reklame i pametan marketing na nemačkom, srpskom i engleskom.",hero_note:"Transparentan meni je stalno uključen (bez zamračenja). Ako želite poluprovidnu verziju na skrol – javite.",hero_img_note:"Zamenite 'hero-robot.png' vašom slikom/robotom.",hero_video_note:"Klikom na jezik birate verziju videa; zvuk je uključen.",sec_services_title:"Šta radimo (sa fokusom na rezultate)",sec_services_sub:"Tri stuba ponude koji najbrže donose efekat.",s1_chip:"Web",s1_title:"Brze i moderne web stranice",s1_text:"Landing, prezentacije, kontakt forme sa praćenjem konverzije.",s2_chip:"Video",s2_title:"Kratke video reklame",s2_text:"15–45s formati, titlovi na DE/SR/EN, optimizovano za društvene mreže.",s3_chip:"Marketing",s3_title:"Kampanje i oglasi",s3_text:"Facebook/Instagram/Google, kalendar objava, hashtagovi i CTA poruke.",sec_products_title:"Paketi (start – pro – premium)",sec_products_sub:"Fiksne cene po modulu, jasno šta dobijate.",p1_title:"START paket",p2_title:"PRO paket",p3_title:"PREMIUM paket",sec_portfolio_title:"Primeri i prototipi",sec_portfolio_sub:"Uskoro dodajemo žive linkove projekata.",port1:"Jednostavna prezentacija sa transparentnim menijem.",port2:"Brendirani intro video bez watermark-a.",port3:"Minimal logo varijante za menije i hero sekcije.",sec_contact_title:"Kontakt i brza ponuda",sec_contact_sub:"Pišite nam šta želite i dobićete brz predlog i cenu.",cta_send:"Pošalji",contact_note:"Dugme šalje mail preko vašeg klijent-programa (mailto). Ako želite potpuno funkcionalnu formu, ubacićemo backend kada bude spreman hosting.",contact_alt_title:"Direktan kontakt",contact_alt_note:"Možemo komunicirati i na nemačkom (C1) — posebno za DACH klijente.",foot_rights:"Sva prava zadržana",btn_preview:"Pogledaj prikaz",btn_open_pdf:"Otvori PDF",cap_peter:"Naslovna stranica — Peterova pekara",cap_core:"Logo varijante — CoreAlliance"},
      de:{nav_services:"Leistungen",nav_products:"Pakete",nav_portfolio:"Portfolio",nav_contact:"Kontakt",cta_quote:"Angebot anfragen",cta_portfolio:"Portfolio ansehen",cta_services:"Leistungen",hero_pill:"Digital Design • Video • Web",hero_title:"Wir sorgen dafür, dass man Sie merkt.",hero_sub:"Websites, Kurzvideos und smartes Marketing auf Deutsch, Serbisch und Englisch.",hero_note:"Die Navigationsleiste bleibt transparent. Halbtransparent beim Scrollen ist optional.",hero_img_note:"Ersetzen Sie 'hero-robot.png' mit Ihrem Bild/Render.",hero_video_note:"Mit der Sprachauswahl wählen Sie das Video; der Ton ist eingeschaltet.",sec_services_title:"Was wir liefern",sec_services_sub:"Drei Module mit schnellem Impact.",s1_chip:"Web",s1_title:"Schnelle, moderne Websites",s1_text:"Landingpages, Präsentationen, Kontaktformulare mit Conversion-Tracking.",s2_chip:"Video",s2_title:"Kurzvideo-Ads",s2_text:"15–45s Formate, Untertitel DE/SR/EN, optimiert für Social Media.",s3_chip:"Marketing",s3_title:"Kampagnen & Ads",s3_text:"Facebook/Instagram/Google, Redaktionsplan, Hashtags & CTA.",sec_products_title:"Pakete (Start – Pro – Premium)",sec_products_sub:"Fixpreise je Modul, klarer Umfang.",p1_title:"START Paket",p2_title:"PRO Paket",p3_title:"PREMIUM Paket",sec_portfolio_title:"Beispiele & Prototypen",sec_portfolio_sub:"Live-Links folgen in Kürze.",port1:"Einfache Präsentationsseite mit transparentem Menü.",port2:"Gebrandetes Intro-Video ohne Wasserzeichen.",port3:"Minimal-Logos für Menüs & Hero-Bereiche.",sec_contact_title:"Kontakt & schnelles Angebot",sec_contact_sub:"Schreiben Sie uns Ihr Ziel – wir senden Vorschlag & Preis.",cta_send:"Senden",contact_note:"Der Button öffnet Ihr Mailprogramm (mailto). Für echte Formulare liefern wir Backend, sobald das Hosting steht.",contact_alt_title:"Direktkontakt",contact_alt_note:"Kommunikation auf Deutsch (C1) für DACH-Kunden.",foot_rights:"Alle Rechte vorbehalten",btn_preview:"Vorschau ansehen",btn_open_pdf:"PDF öffnen",cap_peter:"Startseite — Peterova Bäckerei",cap_core:"Logo-Varianten — CoreAlliance"},
      en:{nav_services:"Services",nav_products:"Packages",nav_portfolio:"Portfolio",nav_contact:"Contact",cta_quote:"Request a quote",cta_portfolio:"See portfolio",cta_services:"Services",hero_pill:"Digital design • Video • Web",hero_title:"We make you memorable.",hero_sub:"Websites, short video ads and smart marketing in German, Serbian and English.",hero_note:"The navbar stays transparent. Optional semi-transparent on scroll.",hero_img_note:"Replace 'hero-robot.png' with your image/render.",hero_video_note:"Click a language to choose the video; audio is ON.",sec_services_title:"What we deliver",sec_services_sub:"Three modules with fast impact.",p1_title:"START package",p2_title:"PRO package",p3_title:"PREMIUM package",sec_portfolio_title:"Examples & prototypes",sec_portfolio_sub:"Live links coming soon.",port1:"Simple presentation site with transparent menu.",port2:"Branded intro video without watermark.",port3:"Minimal logos for menus & hero areas.",sec_contact_title:"Contact & quick quote",sec_contact_sub:"Tell us your goal – we’ll send a proposal & price.",cta_send:"Send",contact_note:"The button opens your mail app (mailto). For a real form we’ll add a backend once hosting is ready.",contact_alt_title:"Direct contact",contact_alt_note:"We can communicate in German (C1) for DACH clients.",foot_rights:"All rights reserved",btn_preview:"View preview",btn_open_pdf:"Open PDF",cap_peter:"Homepage — Peter's Bakery",cap_core:"Logo variations — CoreAlliance"}
    };
    const lists={
      sr:{p1_list:["Jedna stranica (do 5 sekcija)","Kontakt mailto forma","Osnovna SEO meta polja"],p2_list:["Više stranica + portfolio","Kratak video (do 30s)","Priprema oglasa + 10 hashtagova"],p3_list:["Custom dizajn & animacije","2 video reklame (do 45s)","Kampanja 30 dana + izveštaj"]},
      de:{p1_list:["One-Pager (bis 5 Sektionen)","Kontakt (mailto)","Basis-SEO Metadaten"],p2_list:["Mehrere Seiten + Portfolio","Kurzvideo (bis 30s)","Ad-Vorbereitung + 10 Hashtags"],p3_list:["Custom Design & Animationen","2 Video-Ads (bis 45s)","Kampagne 30 Tage + Report"]},
      en:{p1_list:["One-pager (up to 5 sections)","Contact (mailto)","Basic SEO meta tags"],p2_list:["Multi-page + portfolio","Short video (up to 30s)","Ad prep + 10 hashtags"],p3_list:["Custom design & animations","2 video ads (up to 45s)","30-day campaign + report"]}
    };

    function setLang(lang){
      document.querySelectorAll('.lang-switch button').forEach(btn=>btn.classList.toggle('active', btn.dataset.lang===lang));
      const map=dict[lang]||dict.en;
      document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n'); if(map[k]) el.textContent=map[k];});
      const L=lists[lang]||lists.en; const ids=['p1_list','p2_list','p3_list']; ids.forEach(id=>{const ul=document.getElementById(id); if(!ul) return; ul.innerHTML=''; (L[id]||[]).forEach(li=>{const liEl=document.createElement('li'); liEl.textContent=li; ul.appendChild(liEl);});});
      document.documentElement.lang=lang; localStorage.setItem('lang', lang);
    }

    // Video per language + CC auto-select
    const videoMap={ sr:["avatar-sr.mp4","Avatar srb.mp4","Avatar%20srb.mp4"], de:["avatar-de.mp4","Avatar de.mp4","Avatar%20de.mp4"], en:["avatar-en.mp4","Avatar eng.mp4","Avatar%20eng.mp4"]};
    const videoEl=document.getElementById('heroVideo');
    const playBtn=document.getElementById('playBtn');

    function selectSubs(lang){
      if(!videoEl) return;
      const want=({en:'en',de:'de',sr:'sr'})[lang]||'en';
      if(videoEl.textTracks && videoEl.textTracks.length){
        for(let i=0;i<videoEl.textTracks.length;i++){ const tr=videoEl.textTracks[i]; const code=(tr.language||'').toLowerCase(); const label=(tr.label||'').toLowerCase(); const match=code===want || label.startsWith({'en':'english','de':'deutsch','sr':'srpski'}[want]); tr.mode = match ? 'showing' : 'disabled'; }
      } else {
        const tracks=videoEl.querySelectorAll('track'); tracks.forEach(t=>t.removeAttribute('default')); const q=want==='en'?'#track-en':want==='de'?'#track-de':'#track-sr'; const el=videoEl.querySelector(q); if(el) el.setAttribute('default','');
      }
    }

    function setVideoForLang(lang){
      // auto-select matching subtitles
      const candidates=videoMap[lang]||videoMap.en; let i=0;
      function tryNext(){ if(i>=candidates.length){ return; } const src=candidates[i++]; videoEl.src=src; videoEl.load(); videoEl.muted=false; videoEl.play().catch(()=>{}); videoEl.onloadedmetadata=()=>selectSubs(lang); selectSubs(lang); }
      tryNext(); videoEl.onerror=()=>{ tryNext(); };
    }

    document.addEventListener('click', e=>{ const btn=e.target.closest('.lang-switch button'); if(btn){ setLang(btn.dataset.lang); setVideoForLang(btn.dataset.lang); selectSubs(btn.dataset.lang);} });
    playBtn.addEventListener('click', ()=>{ if(videoEl.paused){ videoEl.play(); } else { videoEl.pause(); } });

    // Lightbox helpers
    function i18n(key){ const L=localStorage.getItem('lang')||'en'; return (dict[L]&&dict[L][key])||key; }
    function openLB({img,cap,pdf}){const lb=document.getElementById('lightbox');const imgEl=document.getElementById('lbImg');const capEl=document.getElementById('lbCap');const pdfEl=document.getElementById('lbPdf');imgEl.src=img;imgEl.alt=cap||'Preview';capEl.textContent=cap||'';if(pdf){pdfEl.style.display='inline-flex';pdfEl.href=pdf;}else{pdfEl.style.display='none';}lb.hidden=false;document.body.style.overflow='hidden';}
    function closeLB(){const lb=document.getElementById('lightbox');lb.hidden=true;document.body.style.overflow='';}

    document.getElementById('y').textContent=new Date().getFullYear();
    const initial=localStorage.getItem('lang')||'en';
    setLang(initial); setVideoForLang(initial);
  </script>
</body>
</html>
